!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("angular"),require("rxjs")):"function"==typeof define&&define.amd?define(["angular","rxjs"],r):"object"==typeof exports?exports.AngularObserve=r(require("angular"),require("rxjs")):e.AngularObserve=r(e.angular,e.rxjs)}(this,function(e,r){return function(e){function r(o){if(n[o])return n[o].exports;var t=n[o]={exports:{},id:o,loaded:!1};return e[o].call(t.exports,t,t.exports,r),t.loaded=!0,t.exports}var n={};return r.m=e,r.c=n,r.p="",r(0)}([function(e,r,n){var o=n(1),t=n(3);e.exports=n(2),o.module(e.exports).config(["asyncBindConfigProvider",function(e){e.fromPromise=t.Observable.fromPromise,e.fromValue=t.Observable.of,e.map=t.Observable.prototype.map,e.switchMap=t.Observable.prototype.switchMap}])},function(r,n){r.exports=e},function(e,r,n){var o=n(1);e.exports="filearts.angularObserve";var t=o.module(e.exports,[]);t.provider("asyncBindConfig",[function(){this.fromValue=function(){throw new Error("You need to overwrite `asyncBindConfig.fromValue`.")},this.fromPromise=function(){throw new Error("You need to overwrite `asyncBindConfig.fromPromise`.")},this.map=function(){throw new Error("You need to overwrite `asyncBindConfig.map`.")},this.switchMap=function(){throw new Error("You need to overwrite `asyncBindConfig.switchMap`.")},this.$get=function(){return this}}]),t.directive("asyncBind",["$compile","$q","$rootScope","$timeout","asyncBindConfig",function(e,r,n,t,i){function c(e,r){var o=(r.asyncBind||r.source).split(/\s+as\s+/i),t=o.shift().split("."),c=o[0]||"$value",a=t.shift(),f=s(e,c);return e.empty(),function(e,r,o){function s(e){function r(e){var r=typeof e;return"boolean"===r||"number"===r||"string"===r}var n=!r(y[c])||!r(e);y[c]=e,d("active",n)}function p(e){d("complete")}function l(e){y.$error=e,d("error")}function d(e,n){if(n||e!==v){var o=f[e];if(m&&m.$destroy(),!o)return void r.empty();m=y.$new(),v=e,o(m,function(e){r.empty(),r.append(e)})}y.$root.$$phase||y.$digest(!0)}var m,v,h,y=n.$new(!0,e);e.$watch(a,function(e){function r(e){var r=e.shift(),o=e;return function(e){var t=e[r];return t?n(o,t):i.fromValue()}}function n(e,n){var o=u(n);return e.length?i.switchMap.call(o,r(e)):o}h&&(h.unsubscribe(),h=null),d("loading"),h=n(t.slice(),e).subscribe(s,l,p)}),e.$on("$destroy",function(){h&&(h.unsubscribe(),h=null)})}}function u(e){return e&&"function"==typeof e.subscribe?e:e&&"function"==typeof e.then?i.fromPromise(e):i.fromValue(e)}function s(r,n){var t={},i={loading:[],active:[],error:[],complete:[]},c=[];o.forEach(r.contents(),function(e){switch(e.nodeName.toLowerCase()){case"loading":return i.loading.push.apply(i.loading,e.childNodes);case"active":return i.active.push.apply(i.active,e.childNodes);case"error":return i.error.push.apply(i.error,e.childNodes);case"complete":return i.complete.push.apply(i.complete,e.childNodes);default:return c.push(e)}});var u=!1;if(o.forEach(i,function(r,n){if(r.length){u=!0;var i=o.element(r).clone();t[n]=e(i)}}),!u){c.length||c.push(document.createTextNode("{{"+n+"}}"));var s=o.element(c).clone(),a=o.element(c).clone();t.active=e(s),t.complete=e(a)}return t}return{restrict:"EA",scope:!0,compile:c}}])},function(e,n){e.exports=r}])});