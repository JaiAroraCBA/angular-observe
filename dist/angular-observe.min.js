!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("angular")):"function"==typeof define&&define.amd?define(["angular"],n):"object"==typeof exports?exports.AngularObserve=n(require("angular")):e.AngularObserve=n(e.angular)}(this,function(e){return function(e){function n(o){if(r[o])return r[o].exports;var t=r[o]={exports:{},id:o,loaded:!1};return e[o].call(t.exports,t,t.exports,n),t.loaded=!0,t.exports}var r={};return n.m=e,n.c=r,n.p="",n(0)}([function(e,n,r){e.exports=r(2)},function(n,r){n.exports=e},function(e,n,r){var o=r(1);e.exports="filearts.angularObserve";var t=o.module(e.exports,[]);t.provider("asyncBindConfig",[function(){this.fromValue=function(){throw new Error("You need to overwrite `asyncBindConfig.fromValue`.")},this.fromPromise=function(){throw new Error("You need to overwrite `asyncBindConfig.fromPromise`.")},this.map=function(){throw new Error("You need to overwrite `asyncBindConfig.map`.")},this.switchMap=function(){throw new Error("You need to overwrite `asyncBindConfig.switchMap`.")},this.$get=function(){return this}}]),t.directive("asyncBind",["$compile","$q","$rootScope","$timeout","asyncBindConfig",function(e,n,r,t,i){function u(e,n){var o=(n.asyncBind||n.source).split(/\s+as\s+/i),t=o.shift().split("."),u=o[0]||"$value",s=t.shift(),f=a(e,u);return e.empty(),function(e,n,o){function a(e){function n(e){var n=typeof e;return"boolean"===n||"number"===n||"string"===n}var r=!n(g[u])||!n(e);g[u]=e,d("active",r)}function l(e){d("complete")}function p(e){g.$error=e,d("error")}function d(e,r){if(r||e!==m){var o=f[e];if(h&&h.$destroy(),!o)return void n.empty();h=g.$new(),m=e,o(h,function(e){n.empty(),n.append(e)})}g.$root.$$phase||g.$digest(!0)}var h,m,v,g=r.$new(!0,e);e.$watch(s,function(e){function n(e){var n=e.shift(),o=e;return function(e){var t=e[n];return t?r(o,t):i.fromValue()}}function r(e,r){var o=c(r);return e.length?i.switchMap.call(o,n(e)):o}v&&(v.unsubscribe(),v=null),d("loading"),v=r(t,e).subscribe(a,p,l)}),e.$on("$destroy",function(){v&&(v.unsubscribe(),v=null)})}}function c(e){return e&&"function"==typeof e.subscribe?e:e&&"function"==typeof e.then?i.fromPromise(e):i.fromValue(e)}function a(n,r){var t={},i={loading:[],active:[],error:[],complete:[]},u=[];o.forEach(n.contents(),function(e){switch(e.nodeName.toLowerCase()){case"loading":return i.loading.push.apply(i.loading,e.childNodes);case"active":return i.active.push.apply(i.active,e.childNodes);case"error":return i.error.push.apply(i.error,e.childNodes);case"complete":return i.complete.push.apply(i.complete,e.childNodes);default:return u.push(e)}});var c=!1;if(o.forEach(i,function(n,r){if(n.length){c=!0;var i=o.element(n).clone();t[r]=e(i)}}),!c){u.length||u.push(document.createTextNode("{{"+r+"}}"));var a=o.element(u).clone(),s=o.element(u).clone();t.active=e(a),t.complete=e(s)}return t}return{restrict:"EA",scope:!0,compile:u}}])}])});